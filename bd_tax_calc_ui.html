<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bangladesh Income Tax Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        body {
            font-family: "Inter", sans-serif;
            background: #eef2f5;
            margin: 0;
            padding: 0;
            color: #1d2333;
        }
        .container {
            max-width: 1100px;
            margin: auto;
            padding: 20px;
            margin-top: 40px;
        }
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        header h1 {
            display: flex;
            align-items: center;
            font-size: 22px;
            font-weight: 700;
        }
        .logo {
            background: #0e8e6c;
            color: #fff;
            border-radius: 10px;
            width: 48px;
            height: 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            font-weight: 700;
        }
        .btn-download {
            background: #0046d5;
            color: #fff;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }

        .card {
            background: #fff;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 6px 18px rgba(0,0,0,0.07);
            margin-bottom: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        input, select, button {
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 15px;
        }
        button.calculate {
            background: #0e8e6c;
            border: none;
            color: #fff;
            font-weight: 600;
            cursor: pointer;
        }
        .quick-btns button {
            background: #dde5ea;
            border: none;
            margin-right: 10px;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
        }
        .result-box {
            font-size: 20px;
            font-weight: 700;
        }
        .subtitle {
            font-size: 11px;
            font-weight: 400;
            color: #666;
        }
        .small {
            font-size: 14px;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="logo">BD</span> Bangladesh Income Tax Calculator</h1>
            <button class="btn-download" onclick="generatePDF()">Download Tax Slip (PDF)</button>
        </header>

        <div class="card">
            <label>Enter Income</label>
            <input type="number" id="income" placeholder="500000" />
            <select id="period">
                <option value="monthly">Monthly</option>
                <option value="yearly">Yearly</option>
            </select>
            <button class="calculate" onclick="calculateTax()">Calculate</button>
            <div class="quick-btns">
                <button onclick="quickSet(100000)">100k</button>
                <button onclick="quickSet(200000)">200k</button>
                <button onclick="quickSet(300000)">300k</button>
                <button onclick="quickSet(400000)">400k</button>
                <button onclick="quickSet(500000)">500k</button>
            </div>
        </div>

        <div class="grid">
            <div class="card">
                <div class="subtitle">Annual Income</div>
                <div class="result-box" id="annualIncomeResult">BDT 0</div>
            </div>
            <div class="card">
                <div class="subtitle">Total Annual Tax</div>
                <div class="result-box" id="annualTaxResult">BDT 0</div>
                <div class="small" id="effectiveRate">Effective Tax Rate: 0%</div>
            </div>
            <div class="card">
                <div class="subtitle">Monthly Tax</div>
                <div class="result-box" id="monthlyTaxResult">BDT 0</div>
            </div>
            <div class="card">
                <div class="subtitle">Take-home (Monthly)</div>
                <div class="result-box" id="takeHomeResult">BDT 0</div>
            </div>
        </div>

        <div class="card">
            <h3>Slab Breakdown</h3>
            <pre id="taxBreakdown"></pre>
        </div>
    </div>

<script>
function quickSet(v){
    document.getElementById("income").value = v;
}

function calculateTax(){
    const income = Number(document.getElementById("income").value);
    const period = document.getElementById("period").value;
    let annual = period === "monthly" ? income * 12 : income;

    const slabs = [
        [350000, 0],
        [100000, 0.05],
        [400000, 0.10],
        [500000, 0.15],
        [5000000, 0.20],
        [Infinity, 0.25]
    ];

    let remaining = annual;
    let tax = 0;
    let breakdown = "";

    for (const [limit, rate] of slabs){
        if(remaining <= 0) break;
        const taxable = Math.min(remaining, limit);
        const slabTax = taxable * rate;
        tax += slabTax;
        breakdown += `${taxable.toLocaleString()} @ ${(rate*100)}% = ${slabTax.toLocaleString()} BDT
`;
        remaining -= taxable;
    }

    const monthlyTax = Math.round(tax / 12);
    const takeHome = Math.round((annual - tax) / 12);
    const effRate = ((tax/annual)*100).toFixed(2);

    document.getElementById("annualIncomeResult").textContent = `BDT ${annual.toLocaleString()}`;
    document.getElementById("annualTaxResult").textContent = `BDT ${tax.toLocaleString()}`;
    document.getElementById("monthlyTaxResult").textContent = `BDT ${monthlyTax.toLocaleString()}`;
    document.getElementById("takeHomeResult").textContent = `BDT ${takeHome.toLocaleString()}`;
    document.getElementById("taxBreakdown").textContent = breakdown;
    document.getElementById("effectiveRate").textContent = `Effective Tax Rate: ${effRate}%`;

    return {annual, tax, monthlyTax, takeHome, effRate, breakdown};
}

function generatePDF(){
    const {jsPDF} = window.jspdf;
    const calc = calculateTax();
    const doc = new jsPDF();

    doc.setFontSize(18);
    doc.text("Bangladesh Tax Slip", 14, 20);

    doc.setFontSize(12);
    doc.text(`Annual Income: BDT ${calc.annual.toLocaleString()}`, 14, 35);
    doc.text(`Annual Tax: BDT ${calc.tax.toLocaleString()}`, 14, 45);
    doc.text(`Monthly Tax: BDT ${calc.monthlyTax.toLocaleString()}`, 14, 55);
    doc.text(`Take-home Monthly: BDT ${calc.takeHome.toLocaleString()}`, 14, 65);
    doc.text(`Effective Rate: ${calc.effRate}%`, 14, 75);

    doc.text("Slab Breakdown:", 14, 95);
    doc.setFontSize(10);
    doc.text(calc.breakdown, 14, 105);

    doc.save("BD_Tax_Slip.pdf");
}
</script>

</body>
</html>
